!function(){function n(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function t(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{WQCU:function(n,i,o){"use strict";o.r(i),o.d(i,"TimelineModule",(function(){return Z}));var c=o("ofXK"),r=o("tyNb"),a=o("lJxs"),b=function n(t){e(this,n),this.user=t.user,this.message=t.message,this.date=t.date||Date.now(),t.key&&(this.key=t.key)},s=function n(t){e(this,n),this.uid=t.uid,this.displayName=t.displayName,this.email=t.email,this.photoURL=t.photoURL,this.initial=t.displayName.slice(0,1)},d=o("fXoL"),l=o("UbJi"),u=o("sSZD"),m=function(n){return["users",n]};function f(n,t){if(1&n&&(d.Nb(0,"li"),d.Nb(1,"a",4),d.Nb(2,"div",5),d.Jb(3,"img",6),d.Mb(),d.jc(4),d.Mb(),d.Mb()),2&n){var e=t.$implicit;d.yb(1),d.Zb("routerLink",d.bc(3,m,e.uid)),d.yb(2),d.ac("alt",e.displayName),d.yb(1),d.lc(" ",e.displayName," ")}}var g,p,h=((g=function(){function n(t){e(this,n),this.db=t,this.usersRef=t.list("/users")}return t(n,[{key:"ngOnInit",value:function(){this.users$=this.usersRef.snapshotChanges().pipe(Object(a.a)((function(n){return n.map((function(n){var t=n.payload.val();return new s(t)}))})))}}]),n}()).\u0275fac=function(n){return new(n||g)(d.Ib(u.a))},g.\u0275cmp=d.Cb({type:g,selectors:[["ac-user-list"]],decls:5,vars:3,consts:[[1,"user-list"],[1,"inner"],[1,"users"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"image"],["src","//placehold.jp/30x30.png",1,"rounded-circle",3,"alt"]],template:function(n,t){1&n&&(d.Nb(0,"div",0),d.Nb(1,"div",1),d.Nb(2,"ul",2),d.hc(3,f,5,5,"li",3),d.Xb(4,"async"),d.Mb(),d.Mb(),d.Mb()),2&n&&(d.yb(3),d.Zb("ngForOf",d.Yb(4,1,t.users$)))},directives:[c.i,r.c],pipes:[c.b],styles:[".user-list[_ngcontent-%COMP%]{position:relative;top:10px;width:250px;height:100%;overflow:auto;padding-top:37px;border-right:1px solid #ddd;background-color:#fff}.users[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.users[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.users[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:50px;padding:10px}.image[_ngcontent-%COMP%]{display:inline-block;position:relative;margin-right:5px}"]}),g),M=o("3Pt+"),y=((p=function(){function n(){e(this,n)}return t(n,[{key:"transform",value:function(n){var t=(arguments.length<=1?void 0:arguments[1])||"yyyy\u5e74MM\u6708dd\u65e5 HH:mm";return Object(c.n)(n,t,"en-US")}}]),n}()).\u0275fac=function(n){return new(n||p)},p.\u0275pipe=d.Hb({name:"commentDate",type:p,pure:!0}),p);function v(n,t){1&n&&(d.Nb(0,"div",2),d.Nb(1,"div",3),d.Nb(2,"div",4),d.Nb(3,"h1",5),d.jc(4,"Angular Chat!"),d.Mb(),d.Nb(5,"p",6),d.Nb(6,"a",7),d.jc(7,"\u65b0\u898f\u767b\u9332"),d.Mb(),d.jc(8,"\u3001\u307e\u305f\u306f"),d.Nb(9,"a",8),d.jc(10,"\u30ed\u30b0\u30a4\u30f3"),d.Mb(),d.jc(11,"\u3057\u3066\u59cb\u3081\u307e\u3057\u3087\u3046\uff01 "),d.Mb(),d.Mb(),d.Mb(),d.Mb())}function C(n,t){if(1&n&&(d.Nb(0,"div",30),d.Nb(1,"a",31),d.jc(2),d.Mb(),d.Mb()),2&n){var e=d.Wb().$implicit;d.yb(2),d.kc(e.user.initial)}}function O(n,t){if(1&n){var e=d.Ob();d.Lb(0),d.Nb(1,"i",32),d.Ub("click",(function(){d.ec(e);var n=d.Wb().$implicit;return n.isEdit=!n.isEdit})),d.Mb(),d.Nb(2,"i",33),d.Ub("click",(function(){d.ec(e);var n=d.Wb().$implicit;return d.Wb(2).deleteComment(n)})),d.Mb(),d.Kb()}}function N(n,t){if(1&n&&(d.Lb(0),d.Nb(1,"pre"),d.jc(2),d.Mb(),d.Kb()),2&n){var e=d.Wb().$implicit;d.yb(2),d.kc(e.message)}}function k(n,t){if(1&n){var e=d.Ob();d.Lb(0),d.Nb(1,"div",19),d.Nb(2,"textarea",34),d.Ub("ngModelChange",(function(n){return d.ec(e),d.Wb().$implicit.message=n})),d.Mb(),d.Mb(),d.Nb(3,"div",35),d.Nb(4,"button",36),d.Ub("click",(function(){d.ec(e);var n=d.Wb().$implicit;return d.Wb(2).updateComment(n)})),d.jc(5,"\u4fdd\u5b58"),d.Mb(),d.Nb(6,"button",37),d.Ub("click",(function(){return d.ec(e),d.Wb().$implicit.isEdit=!1})),d.jc(7,"\u30ad\u30e3\u30f3\u30bb\u30eb"),d.Mb(),d.Mb(),d.Kb()}if(2&n){var i=d.Wb().$implicit;d.yb(2),d.Zb("ngModel",i.message)}}function x(n,t){if(1&n&&(d.Nb(0,"div",38),d.Nb(1,"a",31),d.jc(2),d.Mb(),d.Mb()),2&n){var e=d.Wb().$implicit;d.yb(2),d.kc(e.user.initial)}}function P(n,t){if(1&n&&(d.Nb(0,"div",21),d.Nb(1,"div",22),d.hc(2,C,3,1,"div",23),d.Nb(3,"div",24),d.Nb(4,"div",25),d.Nb(5,"h4",26),d.jc(6),d.hc(7,O,3,0,"ng-container",27),d.Mb(),d.Nb(8,"small",28),d.jc(9),d.Xb(10,"commentDate"),d.Mb(),d.Mb(),d.hc(11,N,3,1,"ng-container",27),d.hc(12,k,8,1,"ng-container",27),d.Mb(),d.hc(13,x,3,1,"div",29),d.Mb(),d.Mb()),2&n){var e=t.$implicit,i=d.Wb(2);d.yb(2),d.Zb("ngIf",e.user.uid!==i.currentUser.uid),d.yb(4),d.lc("",e.user.displayName," "),d.yb(1),d.Zb("ngIf",e.user.uid===i.currentUser.uid),d.yb(2),d.kc(d.Yb(10,7,e.date)),d.yb(2),d.Zb("ngIf",!e.isEdit),d.yb(1),d.Zb("ngIf",e.isEdit),d.yb(1),d.Zb("ngIf",e.user.uid===i.currentUser.uid)}}function w(n,t){if(1&n){var e=d.Ob();d.Nb(0,"div",9),d.Jb(1,"ac-user-list"),d.Nb(2,"div",10),d.Nb(3,"section",11),d.Nb(4,"div",12),d.hc(5,P,14,9,"div",13),d.Xb(6,"async"),d.Mb(),d.Mb(),d.Nb(7,"section",14),d.Nb(8,"form",15),d.Nb(9,"div",16),d.Nb(10,"span",17),d.Nb(11,"button",18),d.Ub("click",(function(){d.ec(e);var n=d.Wb();return n.addComment(n.comment)})),d.jc(12,"\u9001\u4fe1"),d.Mb(),d.Mb(),d.Mb(),d.Nb(13,"div",19),d.Nb(14,"textarea",20),d.Ub("ngModelChange",(function(n){return d.ec(e),d.Wb().comment=n})),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb()}if(2&n){var i=d.Wb();d.yb(5),d.Zb("ngForOf",d.Yb(6,2,i.comments$)),d.yb(9),d.Zb("ngModel",i.comment)}}var _,j,U,I=[{path:"",component:(_=function(){function n(t,i){e(this,n),this.afAuth=t,this.db=i,this.comment="",this.commentsRef=i.list("/comments")}return t(n,[{key:"ngOnInit",value:function(){var n=this;this.currentUser$=this.afAuth.authState.pipe(Object(a.a)((function(t){return t?(n.currentUser=new s(t),n.currentUser):null}))),this.comments$=this.commentsRef.snapshotChanges().pipe(Object(a.a)((function(n){return n.map((function(n){var t=n.payload.val();return new b(Object.assign({key:n.payload.key},t))}))})))}},{key:"addComment",value:function(n){n&&(this.commentsRef.push(new b({user:this.currentUser,message:n})),this.comment="")}},{key:"updateComment",value:function(n){var t=n.key,e=n.message;this.commentsRef.update(t,{message:e})}},{key:"deleteComment",value:function(n){this.commentsRef.remove(n.key)}}]),n}(),_.\u0275fac=function(n){return new(n||_)(d.Ib(l.a),d.Ib(u.a))},_.\u0275cmp=d.Cb({type:_,selectors:[["ac-chat"]],decls:4,vars:4,consts:[["welcome",""],["class","chat-container",4,"ngIf","ngIfElse"],[1,"welcome"],[1,"jumbotron","jumbotron-fluid","p-5","border","border-secondary","bg-light"],[1,"container"],[1,"display-3"],[1,"w-100"],["routerLink","/signup"],["routerLink","/login"],[1,"chat-container"],[1,"content"],[1,"chat"],[1,"chat-timeline"],["class","list-group-item list-group-item-action flex-column align-items-start border-0",4,"ngFor","ngForOf"],[1,"chat-editor"],[1,"chat-form"],[1,"form-header","d-flex","flex-row-reverse","mb-2"],[1,"input-group-btn"],["type","submit","tabindex","2",1,"btn","btn-info","btn-sm",3,"click"],[1,"input-group"],["name","comment","placeholder","\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b","tabindex","1",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-group-item","list-group-item-action","flex-column","align-items-start","border-0"],[1,"media"],["class","media-left",4,"ngIf"],[1,"media-body"],[1,"d-flex","w-100","justify-content-between"],[1,"media-heading"],[4,"ngIf"],[1,"media-date"],["class","media-right",4,"ngIf"],[1,"media-left"],["href","#",1,"icon"],["title","\u7de8\u96c6",1,"fa","fa-edit","ml-2",3,"click"],["title","\u524a\u9664",1,"fa","fa-trash","ml-2",3,"click"],["name","edit-comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"edit-buttons"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"media-right"]],template:function(n,t){if(1&n&&(d.hc(0,v,12,0,"ng-template",null,0,d.ic),d.hc(2,w,15,4,"div",1),d.Xb(3,"async")),2&n){var e=d.dc(1);d.yb(2),d.Zb("ngIf",d.Yb(3,2,t.currentUser$))("ngIfElse",e)}},directives:[c.j,r.c,h,c.i,M.h,M.d,M.e,M.a,M.c,M.f],pipes:[c.b,y],styles:[".welcome[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;text-align:center}.welcome[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:30px}.chat-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:100%}.content[_ngcontent-%COMP%]{flex:1 0 auto;position:relative;height:100%}section[_ngcontent-%COMP%]{margin:50px 10px 90px}.chat-editor[_ngcontent-%COMP%]{display:block;position:absolute;bottom:0;width:100%;min-height:100px;margin:0;padding:10px;border-top:1px solid #ddd;background-color:#fff}.chat[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{padding:15px;margin:0 10px;background-color:#f5f5f5;border-radius:4px;font-size:15px;word-break:break-all}.media-body[_ngcontent-%COMP%]   h4.media-heading[_ngcontent-%COMP%]{color:#aaa;font-size:13px}.media-body[_ngcontent-%COMP%]   .media-date[_ngcontent-%COMP%]{color:#aaa;font-size:11px}.media-body[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:inherit;color:inherit;font-size:inherit;margin:0;word-wrap:break-word;white-space:pre-wrap}.icon[_ngcontent-%COMP%]{display:block;width:50px;height:50px;margin:5px;border-radius:.3rem;color:#fff;font-size:30px;line-height:50px;text-align:center}.media-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#f0974e}.media-right[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#35b8c2}.media-body[_ngcontent-%COMP%]   h4.media-heading[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{cursor:pointer}.media-body[_ngcontent-%COMP%]   h4.media-heading[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]:hover{color:#666}.media-body[_ngcontent-%COMP%]   div.edit-buttons[_ngcontent-%COMP%]{margin-top:10px;text-align:center}.media-body[_ngcontent-%COMP%]   div.edit-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100px}"]}),_)}],$=((j=function n(){e(this,n)}).\u0275mod=d.Gb({type:j}),j.\u0275inj=d.Fb({factory:function(n){return new(n||j)},imports:[[r.d.forChild(I)],r.d]}),j),W=o("PCNd"),Z=((U=function n(){e(this,n)}).\u0275mod=d.Gb({type:U}),U.\u0275inj=d.Fb({factory:function(n){return new(n||U)},imports:[[c.c,$,W.a]]}),U)}}])}();