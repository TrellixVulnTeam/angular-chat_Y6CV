(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{WQCU:function(t,n,e){"use strict";e.r(n),e.d(n,"TimelineModule",(function(){return _}));var i=e("ofXK"),o=e("tyNb"),c=e("lJxs");class s{constructor(t){this.user=t.user,this.message=t.message,this.date=t.date||Date.now(),t.key&&(this.key=t.key)}}class r{constructor(t){this.uid=t.uid,this.displayName=t.displayName,this.email=t.email,this.photoURL=t.photoURL,this.initial=t.displayName.slice(0,1)}}var a=e("fXoL"),b=e("UbJi"),d=e("sSZD");const l=function(t){return["users",t]};function m(t,n){if(1&t&&(a.Nb(0,"li"),a.Nb(1,"a",4),a.Nb(2,"div",5),a.Jb(3,"img",6),a.Mb(),a.jc(4),a.Mb(),a.Mb()),2&t){const t=n.$implicit;a.yb(1),a.Zb("routerLink",a.bc(3,l,t.uid)),a.yb(2),a.ac("alt",t.displayName),a.yb(1),a.lc(" ",t.displayName," ")}}let u=(()=>{class t{constructor(t){this.db=t,this.usersRef=t.list("/users")}ngOnInit(){this.users$=this.usersRef.snapshotChanges().pipe(Object(c.a)(t=>t.map(t=>{const n=t.payload.val();return new r(n)})))}}return t.\u0275fac=function(n){return new(n||t)(a.Ib(d.a))},t.\u0275cmp=a.Cb({type:t,selectors:[["ac-user-list"]],decls:5,vars:3,consts:[[1,"user-list"],[1,"inner"],[1,"users"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"image"],["src","//placehold.jp/30x30.png",1,"rounded-circle",3,"alt"]],template:function(t,n){1&t&&(a.Nb(0,"div",0),a.Nb(1,"div",1),a.Nb(2,"ul",2),a.hc(3,m,5,5,"li",3),a.Xb(4,"async"),a.Mb(),a.Mb(),a.Mb()),2&t&&(a.yb(3),a.Zb("ngForOf",a.Yb(4,1,n.users$)))},directives:[i.i,o.c],pipes:[i.b],styles:[".user-list[_ngcontent-%COMP%]{position:relative;top:10px;width:250px;height:100%;overflow:auto;padding-top:37px;border-right:1px solid #ddd;background-color:#fff}.users[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.users[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.users[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:50px;padding:10px}.image[_ngcontent-%COMP%]{display:inline-block;position:relative;margin-right:5px}"]}),t})();var g=e("3Pt+");let p=(()=>{class t{transform(t,...n){const e=n[0]||"yyyy\u5e74MM\u6708dd\u65e5 HH:mm";return Object(i.n)(t,e,"en-US")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=a.Hb({name:"commentDate",type:t,pure:!0}),t})();function f(t,n){1&t&&(a.Nb(0,"div",2),a.Nb(1,"div",3),a.Nb(2,"div",4),a.Nb(3,"h1",5),a.jc(4,"Angular Chat!"),a.Mb(),a.Nb(5,"p",6),a.Nb(6,"a",7),a.jc(7,"\u65b0\u898f\u767b\u9332"),a.Mb(),a.jc(8,"\u3001\u307e\u305f\u306f"),a.Nb(9,"a",8),a.jc(10,"\u30ed\u30b0\u30a4\u30f3"),a.Mb(),a.jc(11,"\u3057\u3066\u59cb\u3081\u307e\u3057\u3087\u3046\uff01 "),a.Mb(),a.Mb(),a.Mb(),a.Mb())}function h(t,n){if(1&t&&(a.Nb(0,"div",30),a.Nb(1,"a",31),a.jc(2),a.Mb(),a.Mb()),2&t){const t=a.Wb().$implicit;a.yb(2),a.kc(t.user.initial)}}function M(t,n){if(1&t){const t=a.Ob();a.Lb(0),a.Nb(1,"i",32),a.Ub("click",(function(){a.ec(t);const n=a.Wb().$implicit;return n.isEdit=!n.isEdit})),a.Mb(),a.Nb(2,"i",33),a.Ub("click",(function(){a.ec(t);const n=a.Wb().$implicit;return a.Wb(2).deleteComment(n)})),a.Mb(),a.Kb()}}function y(t,n){if(1&t&&(a.Lb(0),a.Nb(1,"pre"),a.jc(2),a.Mb(),a.Kb()),2&t){const t=a.Wb().$implicit;a.yb(2),a.kc(t.message)}}function C(t,n){if(1&t){const t=a.Ob();a.Lb(0),a.Nb(1,"div",19),a.Nb(2,"textarea",34),a.Ub("ngModelChange",(function(n){return a.ec(t),a.Wb().$implicit.message=n})),a.Mb(),a.Mb(),a.Nb(3,"div",35),a.Nb(4,"button",36),a.Ub("click",(function(){a.ec(t);const n=a.Wb().$implicit;return a.Wb(2).updateComment(n)})),a.jc(5,"\u4fdd\u5b58"),a.Mb(),a.Nb(6,"button",37),a.Ub("click",(function(){return a.ec(t),a.Wb().$implicit.isEdit=!1})),a.jc(7,"\u30ad\u30e3\u30f3\u30bb\u30eb"),a.Mb(),a.Mb(),a.Kb()}if(2&t){const t=a.Wb().$implicit;a.yb(2),a.Zb("ngModel",t.message)}}function O(t,n){if(1&t&&(a.Nb(0,"div",38),a.Nb(1,"a",31),a.jc(2),a.Mb(),a.Mb()),2&t){const t=a.Wb().$implicit;a.yb(2),a.kc(t.user.initial)}}function N(t,n){if(1&t&&(a.Nb(0,"div",21),a.Nb(1,"div",22),a.hc(2,h,3,1,"div",23),a.Nb(3,"div",24),a.Nb(4,"div",25),a.Nb(5,"h4",26),a.jc(6),a.hc(7,M,3,0,"ng-container",27),a.Mb(),a.Nb(8,"small",28),a.jc(9),a.Xb(10,"commentDate"),a.Mb(),a.Mb(),a.hc(11,y,3,1,"ng-container",27),a.hc(12,C,8,1,"ng-container",27),a.Mb(),a.hc(13,O,3,1,"div",29),a.Mb(),a.Mb()),2&t){const t=n.$implicit,e=a.Wb(2);a.yb(2),a.Zb("ngIf",t.user.uid!==e.currentUser.uid),a.yb(4),a.lc("",t.user.displayName," "),a.yb(1),a.Zb("ngIf",t.user.uid===e.currentUser.uid),a.yb(2),a.kc(a.Yb(10,7,t.date)),a.yb(2),a.Zb("ngIf",!t.isEdit),a.yb(1),a.Zb("ngIf",t.isEdit),a.yb(1),a.Zb("ngIf",t.user.uid===e.currentUser.uid)}}function x(t,n){if(1&t){const t=a.Ob();a.Nb(0,"div",9),a.Jb(1,"ac-user-list"),a.Nb(2,"div",10),a.Nb(3,"section",11),a.Nb(4,"div",12),a.hc(5,N,14,9,"div",13),a.Xb(6,"async"),a.Mb(),a.Mb(),a.Nb(7,"section",14),a.Nb(8,"form",15),a.Nb(9,"div",16),a.Nb(10,"span",17),a.Nb(11,"button",18),a.Ub("click",(function(){a.ec(t);const n=a.Wb();return n.addComment(n.comment)})),a.jc(12,"\u9001\u4fe1"),a.Mb(),a.Mb(),a.Mb(),a.Nb(13,"div",19),a.Nb(14,"textarea",20),a.Ub("ngModelChange",(function(n){return a.ec(t),a.Wb().comment=n})),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb()}if(2&t){const t=a.Wb();a.yb(5),a.Zb("ngForOf",a.Yb(6,2,t.comments$)),a.yb(9),a.Zb("ngModel",t.comment)}}const v=[{path:"",component:(()=>{class t{constructor(t,n){this.afAuth=t,this.db=n,this.comment="",this.commentsRef=n.list("/comments")}ngOnInit(){this.currentUser$=this.afAuth.authState.pipe(Object(c.a)(t=>t?(this.currentUser=new r(t),this.currentUser):null)),this.comments$=this.commentsRef.snapshotChanges().pipe(Object(c.a)(t=>t.map(t=>{const n=t.payload.val();return new s(Object.assign({key:t.payload.key},n))})))}addComment(t){t&&(this.commentsRef.push(new s({user:this.currentUser,message:t})),this.comment="")}updateComment(t){const{key:n,message:e}=t;this.commentsRef.update(n,{message:e})}deleteComment(t){this.commentsRef.remove(t.key)}}return t.\u0275fac=function(n){return new(n||t)(a.Ib(b.a),a.Ib(d.a))},t.\u0275cmp=a.Cb({type:t,selectors:[["ac-chat"]],decls:4,vars:4,consts:[["welcome",""],["class","chat-container",4,"ngIf","ngIfElse"],[1,"welcome"],[1,"jumbotron","jumbotron-fluid","p-5","border","border-secondary","bg-light"],[1,"container"],[1,"display-3"],[1,"w-100"],["routerLink","/signup"],["routerLink","/login"],[1,"chat-container"],[1,"content"],[1,"chat"],[1,"chat-timeline"],["class","list-group-item list-group-item-action flex-column align-items-start border-0",4,"ngFor","ngForOf"],[1,"chat-editor"],[1,"chat-form"],[1,"form-header","d-flex","flex-row-reverse","mb-2"],[1,"input-group-btn"],["type","submit","tabindex","2",1,"btn","btn-info","btn-sm",3,"click"],[1,"input-group"],["name","comment","placeholder","\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b","tabindex","1",1,"form-control",3,"ngModel","ngModelChange"],[1,"list-group-item","list-group-item-action","flex-column","align-items-start","border-0"],[1,"media"],["class","media-left",4,"ngIf"],[1,"media-body"],[1,"d-flex","w-100","justify-content-between"],[1,"media-heading"],[4,"ngIf"],[1,"media-date"],["class","media-right",4,"ngIf"],[1,"media-left"],["href","#",1,"icon"],["title","\u7de8\u96c6",1,"fa","fa-edit","ml-2",3,"click"],["title","\u524a\u9664",1,"fa","fa-trash","ml-2",3,"click"],["name","edit-comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"edit-buttons"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"media-right"]],template:function(t,n){if(1&t&&(a.hc(0,f,12,0,"ng-template",null,0,a.ic),a.hc(2,x,15,4,"div",1),a.Xb(3,"async")),2&t){const t=a.dc(1);a.yb(2),a.Zb("ngIf",a.Yb(3,2,n.currentUser$))("ngIfElse",t)}},directives:[i.j,o.c,u,i.i,g.h,g.d,g.e,g.a,g.c,g.f],pipes:[i.b,p],styles:[".welcome[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;text-align:center}.welcome[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:30px}.chat-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:100%}.content[_ngcontent-%COMP%]{flex:1 0 auto;position:relative;height:100%}section[_ngcontent-%COMP%]{margin:50px 10px 90px}.chat-editor[_ngcontent-%COMP%]{display:block;position:absolute;bottom:0;width:100%;min-height:100px;margin:0;padding:10px;border-top:1px solid #ddd;background-color:#fff}.chat[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{padding:15px;margin:0 10px;background-color:#f5f5f5;border-radius:4px;font-size:15px;word-break:break-all}.media-body[_ngcontent-%COMP%]   h4.media-heading[_ngcontent-%COMP%]{color:#aaa;font-size:13px}.media-body[_ngcontent-%COMP%]   .media-date[_ngcontent-%COMP%]{color:#aaa;font-size:11px}.media-body[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:inherit;color:inherit;font-size:inherit;margin:0;word-wrap:break-word;white-space:pre-wrap}.icon[_ngcontent-%COMP%]{display:block;width:50px;height:50px;margin:5px;border-radius:.3rem;color:#fff;font-size:30px;line-height:50px;text-align:center}.media-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#f0974e}.media-right[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#35b8c2}.media-body[_ngcontent-%COMP%]   h4.media-heading[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{cursor:pointer}.media-body[_ngcontent-%COMP%]   h4.media-heading[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]:hover{color:#666}.media-body[_ngcontent-%COMP%]   div.edit-buttons[_ngcontent-%COMP%]{margin-top:10px;text-align:center}.media-body[_ngcontent-%COMP%]   div.edit-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100px}"]}),t})()}];let P=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(n){return new(n||t)},imports:[[o.d.forChild(v)],o.d]}),t})();var k=e("PCNd");let _=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(n){return new(n||t)},imports:[[i.c,P,k.a]]}),t})()}}]);