{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{WQCU:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"TimelineModule\",(function(){return timeline_module_TimelineModule}));var common=__webpack_require__(\"ofXK\"),router=__webpack_require__(\"tyNb\"),map=__webpack_require__(\"lJxs\");class Comment{constructor(value){this.user=value.user,this.message=value.message,this.date=value.date||Date.now(),value.key&&(this.key=value.key)}}class User{constructor(user){this.uid=user.uid,this.displayName=user.displayName,this.email=user.email,this.photoURL=user.photoURL,this.initial=user.displayName.slice(0,1)}}var core=__webpack_require__(\"fXoL\"),angular_fire_auth=__webpack_require__(\"UbJi\"),angular_fire_database=__webpack_require__(\"sSZD\");const _c0=function(a1){return[\"users\",a1]};function UserListComponent_li_3_Template(rf,ctx){if(1&rf&&(core.Nb(0,\"li\"),core.Nb(1,\"a\",4),core.Nb(2,\"div\",5),core.Jb(3,\"img\",6),core.Mb(),core.jc(4),core.Mb(),core.Mb()),2&rf){const user_r1=ctx.$implicit;core.yb(1),core.Zb(\"routerLink\",core.bc(3,_c0,user_r1.uid)),core.yb(2),core.ac(\"alt\",user_r1.displayName),core.yb(1),core.lc(\" \",user_r1.displayName,\" \")}}let user_list_component_UserListComponent=(()=>{class UserListComponent{constructor(db){this.db=db,this.usersRef=db.list(\"/users\")}ngOnInit(){this.users$=this.usersRef.snapshotChanges().pipe(Object(map.a)(snapshots=>snapshots.map(snapshot=>{const values=snapshot.payload.val();return new User(values)})))}}return UserListComponent.ɵfac=function(t){return new(t||UserListComponent)(core.Ib(angular_fire_database.a))},UserListComponent.ɵcmp=core.Cb({type:UserListComponent,selectors:[[\"ac-user-list\"]],decls:5,vars:3,consts:[[1,\"user-list\"],[1,\"inner\"],[1,\"users\"],[4,\"ngFor\",\"ngForOf\"],[3,\"routerLink\"],[1,\"image\"],[\"src\",\"//placehold.jp/30x30.png\",1,\"rounded-circle\",3,\"alt\"]],template:function(rf,ctx){1&rf&&(core.Nb(0,\"div\",0),core.Nb(1,\"div\",1),core.Nb(2,\"ul\",2),core.hc(3,UserListComponent_li_3_Template,5,5,\"li\",3),core.Xb(4,\"async\"),core.Mb(),core.Mb(),core.Mb()),2&rf&&(core.yb(3),core.Zb(\"ngForOf\",core.Yb(4,1,ctx.users$)))},directives:[common.i,router.c],pipes:[common.b],styles:[\".user-list[_ngcontent-%COMP%]{position:relative;top:10px;width:250px;height:100%;overflow:auto;padding-top:37px;border-right:1px solid #ddd;background-color:#fff}.users[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.users[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.users[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;height:50px;padding:10px}.image[_ngcontent-%COMP%]{display:inline-block;position:relative;margin-right:5px}\"]}),UserListComponent})();var fesm2015_forms=__webpack_require__(\"3Pt+\");let comment_date_pipe_CommentDatePipe=(()=>{class CommentDatePipe{transform(value,...args){const format=args[0]||\"yyyy年MM月dd日 HH:mm\";return Object(common.n)(value,format,\"en-US\")}}return CommentDatePipe.ɵfac=function(t){return new(t||CommentDatePipe)},CommentDatePipe.ɵpipe=core.Hb({name:\"commentDate\",type:CommentDatePipe,pure:!0}),CommentDatePipe})();function ChatComponent_ng_template_0_Template(rf,ctx){1&rf&&(core.Nb(0,\"div\",2),core.Nb(1,\"div\",3),core.Nb(2,\"div\",4),core.Nb(3,\"h1\",5),core.jc(4,\"Angular Chat!\"),core.Mb(),core.Nb(5,\"p\",6),core.Nb(6,\"a\",7),core.jc(7,\"新規登録\"),core.Mb(),core.jc(8,\"、または\"),core.Nb(9,\"a\",8),core.jc(10,\"ログイン\"),core.Mb(),core.jc(11,\"して始めましょう！ \"),core.Mb(),core.Mb(),core.Mb(),core.Mb())}function ChatComponent_div_2_div_5_div_2_Template(rf,ctx){if(1&rf&&(core.Nb(0,\"div\",30),core.Nb(1,\"a\",31),core.jc(2),core.Mb(),core.Mb()),2&rf){const comment_r4=core.Wb().$implicit;core.yb(2),core.kc(comment_r4.user.initial)}}function ChatComponent_div_2_div_5_ng_container_7_Template(rf,ctx){if(1&rf){const _r13=core.Ob();core.Lb(0),core.Nb(1,\"i\",32),core.Ub(\"click\",(function(){core.ec(_r13);const comment_r4=core.Wb().$implicit;return comment_r4.isEdit=!comment_r4.isEdit})),core.Mb(),core.Nb(2,\"i\",33),core.Ub(\"click\",(function(){core.ec(_r13);const comment_r4=core.Wb().$implicit;return core.Wb(2).deleteComment(comment_r4)})),core.Mb(),core.Kb()}}function ChatComponent_div_2_div_5_ng_container_11_Template(rf,ctx){if(1&rf&&(core.Lb(0),core.Nb(1,\"pre\"),core.jc(2),core.Mb(),core.Kb()),2&rf){const comment_r4=core.Wb().$implicit;core.yb(2),core.kc(comment_r4.message)}}function ChatComponent_div_2_div_5_ng_container_12_Template(rf,ctx){if(1&rf){const _r19=core.Ob();core.Lb(0),core.Nb(1,\"div\",19),core.Nb(2,\"textarea\",34),core.Ub(\"ngModelChange\",(function($event){return core.ec(_r19),core.Wb().$implicit.message=$event})),core.Mb(),core.Mb(),core.Nb(3,\"div\",35),core.Nb(4,\"button\",36),core.Ub(\"click\",(function(){core.ec(_r19);const comment_r4=core.Wb().$implicit;return core.Wb(2).updateComment(comment_r4)})),core.jc(5,\"保存\"),core.Mb(),core.Nb(6,\"button\",37),core.Ub(\"click\",(function(){return core.ec(_r19),core.Wb().$implicit.isEdit=!1})),core.jc(7,\"キャンセル\"),core.Mb(),core.Mb(),core.Kb()}if(2&rf){const comment_r4=core.Wb().$implicit;core.yb(2),core.Zb(\"ngModel\",comment_r4.message)}}function ChatComponent_div_2_div_5_div_13_Template(rf,ctx){if(1&rf&&(core.Nb(0,\"div\",38),core.Nb(1,\"a\",31),core.jc(2),core.Mb(),core.Mb()),2&rf){const comment_r4=core.Wb().$implicit;core.yb(2),core.kc(comment_r4.user.initial)}}function ChatComponent_div_2_div_5_Template(rf,ctx){if(1&rf&&(core.Nb(0,\"div\",21),core.Nb(1,\"div\",22),core.hc(2,ChatComponent_div_2_div_5_div_2_Template,3,1,\"div\",23),core.Nb(3,\"div\",24),core.Nb(4,\"div\",25),core.Nb(5,\"h4\",26),core.jc(6),core.hc(7,ChatComponent_div_2_div_5_ng_container_7_Template,3,0,\"ng-container\",27),core.Mb(),core.Nb(8,\"small\",28),core.jc(9),core.Xb(10,\"commentDate\"),core.Mb(),core.Mb(),core.hc(11,ChatComponent_div_2_div_5_ng_container_11_Template,3,1,\"ng-container\",27),core.hc(12,ChatComponent_div_2_div_5_ng_container_12_Template,8,1,\"ng-container\",27),core.Mb(),core.hc(13,ChatComponent_div_2_div_5_div_13_Template,3,1,\"div\",29),core.Mb(),core.Mb()),2&rf){const comment_r4=ctx.$implicit,ctx_r3=core.Wb(2);core.yb(2),core.Zb(\"ngIf\",comment_r4.user.uid!==ctx_r3.currentUser.uid),core.yb(4),core.lc(\"\",comment_r4.user.displayName,\" \"),core.yb(1),core.Zb(\"ngIf\",comment_r4.user.uid===ctx_r3.currentUser.uid),core.yb(2),core.kc(core.Yb(10,7,comment_r4.date)),core.yb(2),core.Zb(\"ngIf\",!comment_r4.isEdit),core.yb(1),core.Zb(\"ngIf\",comment_r4.isEdit),core.yb(1),core.Zb(\"ngIf\",comment_r4.user.uid===ctx_r3.currentUser.uid)}}function ChatComponent_div_2_Template(rf,ctx){if(1&rf){const _r27=core.Ob();core.Nb(0,\"div\",9),core.Jb(1,\"ac-user-list\"),core.Nb(2,\"div\",10),core.Nb(3,\"section\",11),core.Nb(4,\"div\",12),core.hc(5,ChatComponent_div_2_div_5_Template,14,9,\"div\",13),core.Xb(6,\"async\"),core.Mb(),core.Mb(),core.Nb(7,\"section\",14),core.Nb(8,\"form\",15),core.Nb(9,\"div\",16),core.Nb(10,\"span\",17),core.Nb(11,\"button\",18),core.Ub(\"click\",(function(){core.ec(_r27);const ctx_r26=core.Wb();return ctx_r26.addComment(ctx_r26.comment)})),core.jc(12,\"送信\"),core.Mb(),core.Mb(),core.Mb(),core.Nb(13,\"div\",19),core.Nb(14,\"textarea\",20),core.Ub(\"ngModelChange\",(function($event){return core.ec(_r27),core.Wb().comment=$event})),core.Mb(),core.Mb(),core.Mb(),core.Mb(),core.Mb(),core.Mb()}if(2&rf){const ctx_r2=core.Wb();core.yb(5),core.Zb(\"ngForOf\",core.Yb(6,2,ctx_r2.comments$)),core.yb(9),core.Zb(\"ngModel\",ctx_r2.comment)}}const routes=[{path:\"\",component:(()=>{class ChatComponent{constructor(afAuth,db){this.afAuth=afAuth,this.db=db,this.comment=\"\",this.commentsRef=db.list(\"/comments\")}ngOnInit(){this.currentUser$=this.afAuth.authState.pipe(Object(map.a)(user=>user?(this.currentUser=new User(user),this.currentUser):null)),this.comments$=this.commentsRef.snapshotChanges().pipe(Object(map.a)(snapshots=>snapshots.map(snapshot=>{const value=snapshot.payload.val();return new Comment(Object.assign({key:snapshot.payload.key},value))})))}addComment(comment){comment&&(this.commentsRef.push(new Comment({user:this.currentUser,message:comment})),this.comment=\"\")}updateComment(comment){const{key:key,message:message}=comment;this.commentsRef.update(key,{message:message})}deleteComment(comment){this.commentsRef.remove(comment.key)}}return ChatComponent.ɵfac=function(t){return new(t||ChatComponent)(core.Ib(angular_fire_auth.a),core.Ib(angular_fire_database.a))},ChatComponent.ɵcmp=core.Cb({type:ChatComponent,selectors:[[\"ac-chat\"]],decls:4,vars:4,consts:[[\"welcome\",\"\"],[\"class\",\"chat-container\",4,\"ngIf\",\"ngIfElse\"],[1,\"welcome\"],[1,\"jumbotron\",\"jumbotron-fluid\",\"p-5\",\"border\",\"border-secondary\",\"bg-light\"],[1,\"container\"],[1,\"display-3\"],[1,\"w-100\"],[\"routerLink\",\"/signup\"],[\"routerLink\",\"/login\"],[1,\"chat-container\"],[1,\"content\"],[1,\"chat\"],[1,\"chat-timeline\"],[\"class\",\"list-group-item list-group-item-action flex-column align-items-start border-0\",4,\"ngFor\",\"ngForOf\"],[1,\"chat-editor\"],[1,\"chat-form\"],[1,\"form-header\",\"d-flex\",\"flex-row-reverse\",\"mb-2\"],[1,\"input-group-btn\"],[\"type\",\"submit\",\"tabindex\",\"2\",1,\"btn\",\"btn-info\",\"btn-sm\",3,\"click\"],[1,\"input-group\"],[\"name\",\"comment\",\"placeholder\",\"メッセージを入力\",\"tabindex\",\"1\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[1,\"list-group-item\",\"list-group-item-action\",\"flex-column\",\"align-items-start\",\"border-0\"],[1,\"media\"],[\"class\",\"media-left\",4,\"ngIf\"],[1,\"media-body\"],[1,\"d-flex\",\"w-100\",\"justify-content-between\"],[1,\"media-heading\"],[4,\"ngIf\"],[1,\"media-date\"],[\"class\",\"media-right\",4,\"ngIf\"],[1,\"media-left\"],[\"href\",\"#\",1,\"icon\"],[\"title\",\"編集\",1,\"fa\",\"fa-edit\",\"ml-2\",3,\"click\"],[\"title\",\"削除\",1,\"fa\",\"fa-trash\",\"ml-2\",3,\"click\"],[\"name\",\"edit-comment\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[1,\"edit-buttons\"],[1,\"btn\",\"btn-success\",\"btn-sm\",3,\"click\"],[1,\"btn\",\"btn-warning\",\"btn-sm\",3,\"click\"],[1,\"media-right\"]],template:function(rf,ctx){if(1&rf&&(core.hc(0,ChatComponent_ng_template_0_Template,12,0,\"ng-template\",null,0,core.ic),core.hc(2,ChatComponent_div_2_Template,15,4,\"div\",1),core.Xb(3,\"async\")),2&rf){const _r0=core.dc(1);core.yb(2),core.Zb(\"ngIf\",core.Yb(3,2,ctx.currentUser$))(\"ngIfElse\",_r0)}},directives:[common.j,router.c,user_list_component_UserListComponent,common.i,fesm2015_forms.h,fesm2015_forms.d,fesm2015_forms.e,fesm2015_forms.a,fesm2015_forms.c,fesm2015_forms.f],pipes:[common.b,comment_date_pipe_CommentDatePipe],styles:[\".welcome[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;text-align:center}.welcome[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:30px}.chat-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:100%}.content[_ngcontent-%COMP%]{flex:1 0 auto;position:relative;height:100%}section[_ngcontent-%COMP%]{margin:50px 10px 90px}.chat-editor[_ngcontent-%COMP%]{display:block;position:absolute;bottom:0;width:100%;min-height:100px;margin:0;padding:10px;border-top:1px solid #ddd;background-color:#fff}.chat[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{padding:15px;margin:0 10px;background-color:#f5f5f5;border-radius:4px;font-size:15px;word-break:break-all}.media-body[_ngcontent-%COMP%]   h4.media-heading[_ngcontent-%COMP%]{color:#aaa;font-size:13px}.media-body[_ngcontent-%COMP%]   .media-date[_ngcontent-%COMP%]{color:#aaa;font-size:11px}.media-body[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:inherit;color:inherit;font-size:inherit;margin:0;word-wrap:break-word;white-space:pre-wrap}.icon[_ngcontent-%COMP%]{display:block;width:50px;height:50px;margin:5px;border-radius:.3rem;color:#fff;font-size:30px;line-height:50px;text-align:center}.media-left[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#f0974e}.media-right[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background-color:#35b8c2}.media-body[_ngcontent-%COMP%]   h4.media-heading[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{cursor:pointer}.media-body[_ngcontent-%COMP%]   h4.media-heading[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]:hover{color:#666}.media-body[_ngcontent-%COMP%]   div.edit-buttons[_ngcontent-%COMP%]{margin-top:10px;text-align:center}.media-body[_ngcontent-%COMP%]   div.edit-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100px}\"]}),ChatComponent})()}];let timeline_routing_module_TimelineRoutingModule=(()=>{class TimelineRoutingModule{}return TimelineRoutingModule.ɵmod=core.Gb({type:TimelineRoutingModule}),TimelineRoutingModule.ɵinj=core.Fb({factory:function(t){return new(t||TimelineRoutingModule)},imports:[[router.d.forChild(routes)],router.d]}),TimelineRoutingModule})();var shared_module=__webpack_require__(\"PCNd\");let timeline_module_TimelineModule=(()=>{class TimelineModule{}return TimelineModule.ɵmod=core.Gb({type:TimelineModule}),TimelineModule.ɵinj=core.Fb({factory:function(t){return new(t||TimelineModule)},imports:[[common.c,timeline_routing_module_TimelineRoutingModule,shared_module.a]]}),TimelineModule})()}}]);","extractedComments":[]}